var LoadingOverlayProgress = function (a) {
    function e(customText) {  // Acepta el texto personalizado como parámetro
        var wrapper = $("<div>", {
            "class": "loadingoverlay_progress_wrapper",
            css: {
                position: "relative",
                width: "100%",
                flex: "1 0 auto"
            }
        });

        // Add the progress bar
        b = $("<div>", {
            "class": "loadingoverlay_progress_bar",
            css: $.extend(!0, {
                position: "absolute",
                left: "0"
            }, d.bar)
        }).appendTo(wrapper);

        // Add the progress text (percentage)
        c = $("<div>", {
            "class": "loadingoverlay_progress_text",
            css: $.extend(!0, {
                position: "absolute",
                left: "0",
                "text-align": "right",
                "white-space": "nowrap"
            }, d.text),
            text: "0 %"
        }).appendTo(wrapper);

        // Add the custom loading text, uses the parameter customText
        t = $("<div>", {
            "class": "loadingoverlay_text loadingoverlay_text_custom",
            text: customText || "Cargando"  // Usar el texto personalizado o "Cargando" por defecto
        }).appendTo(wrapper);

        f(0);  // Initialize progress to 0
        return wrapper;
    }

    function f(a) {
        // Ensure progress is between 0 and 100
        a = Math.max(0, Math.min(100, a));

        var d = {
            right: 100 - a + "%"
        };

        // Update the progress bar and percentage text
        b.css(d);
        c.css(d);
        c.text(a + "%");
    }

    var b, c, t, d = $.extend(!0, {}, {
        bar: {
            bottom: "25px",
            height: "20px",
            background: "#9bbb59"
        },
        text: {
            bottom: "50px",
            font: "14pt/1.2 sans-serif",
            color: "#303030"
        }
    }, a);

    return {
        Init: e,      // Modificado para aceptar texto personalizado
        Update: f
    };
};